import{T as O,h as _,r as w,o as i,f as a,a as d,w as j,u as s,b as t,t as p,g as y,i as U,p as S,F as u,k as f,q as B,e as A,Z as M}from"./app-CLi9EHbr.js";import{_ as m}from"./InputLabel-BtHLtLjz.js";import{_ as g}from"./TextInput-DYYddPi0.js";import{_ as L}from"./Modal-DCV9Qxl3.js";import{c as h}from"./colors-DnX_8xEv.js";const P={class:"max-w-screen-lg mx-auto mt-8"},R={class:"dark:text-white mb-8"},T={class:"lg:grid grid-cols-3 gap-4"},q={key:0,class:"absolute inset-0 flex justify-center items-center bg-black/40 group-hover:opacity-100 opacity-0 duration-200 ease-in-out"},E=t("i",{class:"bx bx-photo-album text-5xl text-white p-3 rounded-full"},null,-1),Z=[E],G={key:1,class:"bx bx-plus font-bold text-3xl dark:text-white"},H=["src"],J={class:"flex mt-2"},K=["value"],Q={class:"col-span-2 p-6 rounded-lg bg-white dark:bg-zinc-800"},W=["selected"],X=["value","selected"],Y={class:"grid grid-cols-3 gap-1"},ee=t("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1),te=["onClick"],oe=t("div",{class:"flex justify-end"},[t("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1),le={class:"flex justify-end py-8"},se={class:"p-4 dark:text-white"},ne=t("p",{class:"font-bold"},"Confirmation",-1),ie={class:"mt-4 flex justify-end space-x-2"},ae={id:"costings"},de=["value"],be={__name:"Show",props:{item:Object,categories:Object,suggestions:Object},setup(n){const D=Object.keys(h).filter(r=>typeof h[r]=="object"),b=n,l=O({category_id:b.item.category_id,image:"",name:b.item.name,price:b.item.price,color:b.item.color,breakdown:b.item.costing}),x=_(()=>l.breakdown.reduce((r,o)=>r+Number(o.cost),0)),V=_(()=>(Number(l.price)-x.value).toFixed(2)),C=w(l.color),z=w(null),$=w(null),N=()=>{if(l.image){let r=new FileReader;r.readAsDataURL(l.image),r.onload=o=>{$.value=o.target.result}}},I=()=>{l.breakdown.push({name:"",cost:""})},F=r=>{l.breakdown.splice(r,1)},v=w(!1);return(r,o)=>(i(),a(u,null,[d(s(M),null,{default:j(()=>[t("title",null,`
            `+p(n.item.name)+`
        `,1)]),_:1}),t("div",P,[t("p",R,p(n.item.name),1),t("div",T,[t("div",null,[t("div",{onClick:o[0]||(o[0]=e=>z.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-white dark:bg-zinc-700 flex justify-center items-center relative group"},[n.item.pic?(i(),a("div",q,Z)):y("",!0),!s(l).image&&!n.item.pic?(i(),a("i",G)):y("",!0),s(l).image||n.item.pic?(i(),a("img",{key:2,src:$.value||`../../storage/${n.item.pic}`,class:"w-72 h-72 object-cover",alt:""},null,8,H)):y("",!0)]),d(m,{class:"mt-4",for:"color",value:"Color"}),t("div",J,[U(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>s(l).color=e),id:"color",name:"color",onChange:o[2]||(o[2]=e=>C.value=e.target.value),class:"rounded-lg border border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white"},[(i(!0),a(u,null,f(s(D),e=>(i(),a(u,null,[(i(!0),a(u,null,f(s(h)[e],c=>(i(),a("option",{style:B(`background: ${c} !important`),value:c},p(c),13,K))),256))],64))),256))],544),[[S,s(l).color]]),t("div",{class:"w-10 h-10 ml-4",style:B(`background-color: ${C.value} !important`)},null,4)])]),t("div",Q,[t("form",{onSubmit:o[9]||(o[9]=A(e=>s(l).post(r.route("items.update",n.item)),["prevent"])),enctype:"multipart/form-data"},[t("input",{ref_key:"newImage",ref:z,onInput:o[3]||(o[3]=e=>s(l).image=e.target.files[0]),onChange:N,type:"file",accept:"image/*",hidden:""},null,544),d(m,{for:"categories",value:"Category"}),U(t("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>s(l).category_id=e),id:"categories",class:"w-full mt-2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[t("option",{hidden:"",disabled:"",selected:n.item.category_id===69420},"Select category",8,W),(i(!0),a(u,null,f(n.categories,e=>(i(),a("option",{value:e.id,selected:n.item.category_id===e.id},p(e.name),9,X))),256))],512),[[S,s(l).category_id]]),d(m,{class:"mt-4",for:"name",value:"Name"}),d(g,{id:"name",type:"text",modelValue:s(l).name,"onUpdate:modelValue":o[5]||(o[5]=e=>s(l).name=e),class:"mt-2 w-full block"},null,8,["modelValue"]),t("div",Y,[t("div",null,[d(m,{class:"mt-4",for:"price",value:"Price"}),d(g,{id:"price",type:"number",modelValue:s(l).price,"onUpdate:modelValue":o[6]||(o[6]=e=>s(l).price=e),class:"mt-2 w-full block"},null,8,["modelValue"])]),t("div",null,[d(m,{class:"mt-4",for:"cost",value:"Cost"}),d(g,{disabled:"",id:"cost",type:"number",modelValue:x.value,"onUpdate:modelValue":o[7]||(o[7]=e=>x.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])]),t("div",null,[d(m,{class:"mt-4",for:"profit",value:"Profit"}),d(g,{disabled:"",id:"profit",type:"number",modelValue:V.value,"onUpdate:modelValue":o[8]||(o[8]=e=>V.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])])]),ee,(i(!0),a(u,null,f(s(l).breakdown,(e,c)=>(i(),a("div",{key:c,class:"grid grid-cols-11 gap-2 m-2"},[d(g,{list:"costings",type:"text",modelValue:e.name,"onUpdate:modelValue":k=>e.name=k,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),d(g,{type:"number",modelValue:e.cost,"onUpdate:modelValue":k=>e.cost=k,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),t("i",{onClick:k=>F(c),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,te)]))),128)),t("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:I},"Add"),oe],32)])]),t("div",le,[t("button",{onClick:o[10]||(o[10]=e=>v.value=!0),type:"button",class:"text-red-500 border border-red-500 px-4 hover:bg-red-500 hover:text-white rounded-lg text-sm"},"Delete")])]),d(L,{show:v.value,onClose:o[13]||(o[13]=e=>v.value=!1),"max-width":"md"},{default:j(()=>[t("div",se,[ne,t("p",null,"Are you sure you want to delete "+p(n.item.name)+"?",1),t("div",ie,[t("button",{onClick:o[11]||(o[11]=e=>v.value=!1),class:"dark:text-white hover:underline"},"Cancel"),t("button",{onClick:o[12]||(o[12]=e=>r.$inertia.delete(r.route("items.destroy",n.item))),class:"bg-red-500 hover:bg-red-700 active:bg-red-900 duration-200 ease-in-out px-3 py-1 text-white rounded-lg"},"Delete")])])]),_:1},8,["show"]),t("datalist",ae,[(i(!0),a(u,null,f(n.suggestions,e=>(i(),a("option",{value:e},null,8,de))),256))])],64))}};export{be as default};
