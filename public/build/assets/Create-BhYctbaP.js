import{T as S,h as y,r as f,o as n,f as r,a,w as I,u as s,b as l,g as _,i as N,p as A,F as u,k as g,q as V,e as D,Z as F,t as L}from"./app-CLi9EHbr.js";import{_ as m}from"./InputLabel-BtHLtLjz.js";import{_ as c}from"./TextInput-DYYddPi0.js";import{c as v}from"./colors-DnX_8xEv.js";const P=l("title",null,`
            Add new item
        `,-1),R={class:"max-w-screen-lg mx-auto mt-8"},M=l("p",{class:"dark:text-white mb-8"},"New item",-1),O={class:"grid grid-cols-3 gap-4"},T={key:0,class:"bx bx-plus font-bold text-3xl dark:text-white"},q=["src"],E={class:"flex mt-2"},Z=["value"],G={class:"col-span-2 p-6 rounded-lg bg-white dark:bg-zinc-800 h-min"},H={class:"grid grid-cols-3 gap-1"},J=l("p",{class:"block font-medium text-sm text-zinc-700 dark:text-zinc-300 mt-4 select-none"},"Breakdown of cost",-1),K=["onClick"],Q=l("div",{class:"flex justify-end"},[l("button",{"type-":"submit",class:"rounded-lg px-4 py-2 bg-green-500 hover:bg-green-700 active:bg-green-900 text-white text-sm duration-200 ease-in-out"},"Save")],-1),W={id:"costings"},X=["value"],oe={__name:"Create",props:{suggestions:Object},setup(C){const z=Object.keys(v).filter(i=>typeof v[i]=="object"),U=new URLSearchParams(window.location.search),o=S({category_id:U.get("category"),image:"",name:"",price:"",color:"",breakdown:[]}),b=y(()=>o.breakdown.reduce((i,t)=>i+t.cost,0)),w=y(()=>o.price-b.value),k=f(""),x=f(null),h=f(null),j=()=>{if(o.image){let i=new FileReader;i.readAsDataURL(o.image),i.onload=t=>{h.value=t.target.result}}},$=()=>{o.breakdown.push({name:"",cost:""})},B=i=>{o.breakdown.splice(i,1)};return(i,t)=>(n(),r(u,null,[a(s(F),null,{default:I(()=>[P]),_:1}),l("div",R,[M,l("div",O,[l("div",null,[l("div",{onClick:t[0]||(t[0]=e=>x.value.click()),class:"h-72 w-72 rounded-lg overflow-hidden bg-white dark:bg-zinc-700 flex justify-center items-center"},[s(o).image?_("",!0):(n(),r("i",T)),s(o).image?(n(),r("img",{key:1,src:h.value,class:"w-72 h-72 object-cover",alt:""},null,8,q)):_("",!0)]),a(m,{class:"mt-4",for:"color",value:"Color"}),l("div",E,[N(l("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s(o).color=e),id:"color",name:"color",onChange:t[2]||(t[2]=e=>k.value=e.target.value),class:"rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 dark:text-white"},[(n(!0),r(u,null,g(s(z),e=>(n(),r(u,null,[(n(!0),r(u,null,g(s(v)[e],d=>(n(),r("option",{style:V(`background: ${d} !important`),value:d},L(d),13,Z))),256))],64))),256))],544),[[A,s(o).color]]),l("div",{class:"w-10 h-10 ml-4",style:V(`background-color: ${k.value} !important`)},null,4)])]),l("div",G,[l("form",{onSubmit:t[8]||(t[8]=D(e=>s(o).post(i.route("items.store")),["prevent"]))},[l("input",{ref_key:"newImage",ref:x,onInput:t[3]||(t[3]=e=>s(o).image=e.target.files[0]),onChange:j,type:"file",accept:"image/*",hidden:""},null,544),a(m,{for:"name",value:"Name"}),a(c,{id:"name",type:"text",modelValue:s(o).name,"onUpdate:modelValue":t[4]||(t[4]=e=>s(o).name=e),class:"mt-2 w-full block"},null,8,["modelValue"]),l("div",H,[l("div",null,[a(m,{class:"mt-4",for:"price",value:"Price"}),a(c,{id:"price",type:"number",modelValue:s(o).price,"onUpdate:modelValue":t[5]||(t[5]=e=>s(o).price=e),class:"mt-2 w-full block"},null,8,["modelValue"])]),l("div",null,[a(m,{class:"mt-4",for:"cost",value:"Cost"}),a(c,{disabled:"",id:"cost",type:"number",modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])]),l("div",null,[a(m,{class:"mt-4",for:"profit",value:"Profit"}),a(c,{disabled:"",id:"profit",type:"number",modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=e=>w.value=e),class:"mt-2 w-full block disabled:bg-zinc-700"},null,8,["modelValue"])])]),J,(n(!0),r(u,null,g(s(o).breakdown,(e,d)=>(n(),r("div",{key:d,class:"grid grid-cols-11 gap-2 m-2"},[a(c,{list:"costings",type:"text",modelValue:e.name,"onUpdate:modelValue":p=>e.name=p,class:"w-full block col-span-5",placeholder:"Item"},null,8,["modelValue","onUpdate:modelValue"]),a(c,{type:"number",modelValue:e.cost,"onUpdate:modelValue":p=>e.cost=p,class:"w-full block col-span-5",placeholder:"Cost"},null,8,["modelValue","onUpdate:modelValue"]),l("i",{onClick:p=>B(d),class:"bx bx-x p-2 w-8 h-8 rounded-lg text-white bg-red-500 hover:bg-red-700 duration-200 ease-in-out inline-flex justify-center items-center"},null,8,K)]))),128)),l("button",{type:"button",class:"text-xs px-4 py-1 rounded-lg bg-zinc-400 text-white",onClick:$},"Add"),Q],32)])])]),l("datalist",W,[(n(!0),r(u,null,g(C.suggestions,e=>(n(),r("option",{value:e},null,8,X))),256))])],64))}};export{oe as default};
